<main class="tasks-container" role="main" aria-labelledby="main-heading">
  <!-- Header Section -->
  <header class="tasks-header" role="banner">
    <div class="header-content">
      <div class="title-section">
        <h1 id="main-heading">Task Management</h1>
        <p class="subtitle">Manage and track all tasks across teams and projects</p>
      </div>
      <div class="header-actions">
        <button
          mat-raised-button
          color="primary"
          class="create-btn"
          (click)="openCreateTask()"
          aria-label="Create a new task"
        >
          <mat-icon aria-hidden="true">add</mat-icon>
          New Task
        </button>
      </div>
    </div>

    <!-- Stats Cards Component -->
    <app-stats-cards
      role="region"
      aria-label="Task statistics summary"
      [pendingCount]="pendingCount()"
      [inProgressCount]="inProgressCount()"
      [doneCount]="doneCount()"
      [totalCount]="totalCount()"
      [overdueCount]="overdueCount()"
    ></app-stats-cards>
  </header>

  <!-- Filter Component -->
  <app-filter
    role="search"
    aria-label="Task filters"
    [users]="users()"
    [showOverdueOnly]="showOverdueOnly()"
    (filtersChanged)="onFiltersChanged($event)"
    (overdueToggled)="onOverdueToggled($event)"
    (filtersCleared)="onFiltersCleared()"
  ></app-filter>

  <!-- Table Component -->
  <app-table
    role="region"
    aria-label="Tasks list"
    [tasks]="tasks()"
    [loading]="loading()"
    [displayedColumns]="displayedColumns()"
    [paginatorOptions]="paginatorOptions()"
    [pageSize]="pageSize()"
    (taskView)="viewTask($event)"
    (taskEdit)="editTask($event)"
    (taskDuplicate)="duplicateTask($event)"
    (taskDelete)="deleteTask($event)"
    (refresh)="loadData()"
    (export)="exportData()"
    (clearFilters)="onFiltersCleared()"
    (pageChange)="onPageChange($event)"
  ></app-table>
</main>
